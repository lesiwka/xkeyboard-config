Notes about the Debian xkb-data package
=======================================

Support of Apple keyboards
--------------------------

Apple keyboards have been mostly unusable with XKB for years,
and many unofficial files spread around the Internet to fix
this mess.  Fortunately this issue has been fixed now, thanks
to testers on the debian-powerpc mailing list, and changes
have been merged upstream.

The following models are available:
 * macintosh_old
   For old kernels with ADB keycodes
 * ibook powerbook macbook78 macbook79
   Laptop, 3rd and 4th levels are obtained by the small Enter key.
 * macintosh
   Default Macintosh
These models look for symbols in /usr/share/X11/xkb/symbols/macintosh_vndr,
which means that the following layouts can be selected:
   ch de dk es fi fr gb is it latam nl no pt se us

PC models can be selected, to have access to more layouts.  Some options
may then be added to have the same behavior as with Macintosh keyboards.
Here is a (non exhaustive) list of relevant options:
 * lv3:lwin_switch   Press left Apple-key to choose 3rd level.
 * lv3:enter_switch  Press Enter key on keypad to choose 3rd level.
 * numpad:mac        Numpad keys work as with Macintosh keyboards.
 * apple:badmap      Swap keycodes of two keys when Mac keyboards are
                     misdetected by kernel.

Variants have been added to PC layouts to emulate Macintosh layouts.
For instance,

    Option     "XkbRules"    "xorg"
    Option     "XkbModel"    "ibook"
    Option     "XkbLayout"   "fr"

in /etc/X11/xorg.conf can be replaced by

    Option     "XkbRules"    "xorg"
    Option     "XkbModel"    "pc105"
    Option     "XkbLayout"   "fr"
    Option     "XkbVariant"  "mac"
    Option     "XkbOptions"  "lv3:enter_switch,apple:badmap,numpad:mac"

Denis Barbier <barbier@debian.org>  Thu,  5 Oct 2006 22:51:12 +0200

Cleaning /etc/X11/xkb
---------------------

Since 0.8-3, all the files in /etc/X11/xkb/ were moved to
/usr/share/X11/xkb/symbols. If you want to clean /etc/X11/xkb/, you need
to run dpkg -P xlibs.

Customised layouts
------------------

Since 0.8-1, layouts are read from /usr/share/X11/xkb/symbols and no
more from /etc/X11/xkb/symbols. Thus, layouts are no more conffiles.
The good way to have a custom layout is to create one's own layout that
includes other layouts and customises some keys you want to modify.

Do not modify directly files /usr/share/X11/xkb/symbols.

For instance, to create a French layout altering the 'a' key, create a
/usr/share/X11/xkb/symbols/my_fr file containing the following lines
(without the pipes):

   |   partial alphanumeric_keys
   |   xkb_symbols "my_fr" {
   |       include "fr"
   |       key <AD01> { [ a, A, oe, OE ] };
   |   };

To have it appear in your desktop environment layout manager, add
"my_fr" in /etc/X11/xkb/base.xml as a new layout. For
example, insert the following lines (without the pipes):

    |    <layout>
    |      <configItem>
    |        <name>my_fr</name>
    |        <shortDescription>MyFr</shortDescription>
    |        <description>French (customized)</description>
    |      </configItem>
    |      <variantList/>
    |    </layout>

/etc/X11/xkb/base.xml is a configuration file.

Mohammed Adn√®ne Trojette <adn+deb@diwi.org>  Sun, 23 Sep 2007 00:05:50 +0200
